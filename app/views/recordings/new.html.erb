
<head>
</head>
<body>
  <br>
  <br>
  <br>
  <br>



  <div class="form"%>
  <%= form_for(@recording) do |f| %>

  <div>
    <%= f.label :title %>
    <%= f.text_field :title%>
  </div>

  <div>
    <%= f.label :description %>
    <%= f.text_field :description, size: 50%>
  </div>
  <div>
    <%= f.label :tag_list, "Tags (separated by commas)" %>
    <%= f.text_field :tag_list %>
  </div>

  <div>
    <%= f.label :sound %>
    <%= f.file_field :sound %>
  </div>

  <div id="route2" style="width:50%;height:380px;">

</div>

  <%=f.submit%>
  <%end%>
</div>
</body>
  <script>
  var recordings = [];
  var markerarray = []
function RecordingLoc(latitude, longitude) {
  this.latitude = latitude;
  this.longitude = longitude;
}



function initialize() {
  var mapProp = {
    zoom:2,
    center: new google.maps.LatLng(40.7064168,-74.0090889),
    mapTypeId:google.maps.MapTypeId.ROADMAP
  };
  var map=new google.maps.Map(document.getElementById("route2"),mapProp);

google.maps.event.addListener(map, 'click', function(e) {
  if (markerarray.length >0){
    for (i=0; i< markerarray.length; i++){
      markerarray[i].setMap(null)
    }
  }
        placeMarker(e.latLng, map);
        var latitude = e.latLng.lat();
        var longitude = e.latLng.lng();


        if(recordings.length > 0) {
            recordings = []
            $(".reclocation").remove()


        }
         var location = new RecordingLoc(latitude, longitude);
        recordings.push(location);
           $(".new_recording").prepend("<input type='hidden' class='reclocation' name='recording[latitude]' value="+location.latitude+" id= 'amihere' >");
           $(".new_recording").prepend("<input type='hidden' class='reclocation' name='recording[longitude]' value="+location.longitude+" >");


      });


      function placeMarker(position, map) {
        var marker = new google.maps.Marker({
          position: position,
          map: map
        });
          markerarray.push(marker)

        map.panTo(position);

      }

}
google.maps.event.addDomListener(window, 'load', initialize);



</script>

